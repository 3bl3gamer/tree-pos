Tree nodes position calculator
==============================

## Попытка номер раз

http://3bl3gamer.no-ip.org/tree-pos/1.html

![First version](https://raw.githubusercontent.com/3bl3gamer/tree-pos/master/img/1.png "First version")

Более ранний, простой и медленный способ.


### Суть проста:

 * есть ноды (`Node`) с координатами и списком дочерних нод
 * каждая нода притягивается ко всем дочерним нодам, а их притягивает к себе (`compressTree`, [по Верле](http://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%92%D0%B5%D1%80%D0%BB%D0%B5))
 * каждая нода отталкивается от всех нод дерева (вообще от всех, `pushEachNodeFromWholeTree`, по тому же Верле)

Особенно медленный последний пункт.



## Попытка номер два

http://3bl3gamer.no-ip.org/tree-pos/2.html

![Second version](https://raw.githubusercontent.com/3bl3gamer/tree-pos/master/img/2.png "Second version")

Второй способ. Сложнее и СИЛЬНО быстрее.


### Суть:

 * у ноды кроме координат появляется "маска" (`circ`) с координатами и радиусом (серые каруги на скрине)
 * координаты нод считаются относительно родителя
 * все дочки каждой ноды и сама нода вписаны в "маску" этой ноды
 * все дочки каждой ноды (1го уровня) притягиваются друг у другу (`verletNodes`)
 * все дочки каждой ноды взаимно притягиваются к этой ноде (`verletNodeTo00`)
 * притяжение нод работает всё по тому же Верле
 * если маски не пересекаются, ноды притягиваются, иначе - отталкиваются
 * вместе с Верле на каждом шаге обновляется расположение и радиус маски каждой ноды (`updNodeRadius`)

По сравнению с первым вариантом вычисления ускорились раз в 1000 (для дерева примерно из 1700 нод).


#### В качестве доп. пояснения

Где `circ`, и как он считается:

![Help for second](https://raw.githubusercontent.com/3bl3gamer/tree-pos/master/img/2.1.png "Help for second")

Например, если у ноды потомков нет, её "маска" радиусом с саму ноду.
